{% load static %}

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>KT사외공사</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="{% static 'images/kt.png' %}" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
       
        
        <link rel="stylesheet" href={% static "upload.css"%}>

    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
            <div class="container">
                <a href='/gongsa/main/'><img src="{% static 'images/LogoGongsa.png' %}" alt="My Image" width="125" height="40"></a>
                <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                       <li class="nav-item mx-0 mx-lg-1"><a class="py-3 px-0 px-lg-3 rounded" href="/gongsa/upload/">접수하기</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="py-3 px-0 px-lg-3 rounded" href='/gongsa/worklist/'>접수확인</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="py-3 px-0 px-lg-3 rounded" href='/gongsa/logout/'>Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>
<!-- Mastahead -->
<section class="masthead bg-primary text-white text-center" id="contact">
    <div class="box sbsection" style="border: 0.4px solid #FFFFFF; border-radius: 5px; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.65);">
      <div class="container" style="padding: 3%; border: none;">
        <div class="row justify-content-center">
          <div class="col-lg-12" style="height: 550px;">
            <form id="contactForm" data-sb-form-api-token="API_TOKEN" method="post" action="{% url 'gongsa:upload' %}" enctype="multipart/form-data">
              {% csrf_token %}
              <h2 class="page-section-heading text-center text-uppercase text-secondary" style="padding-bottom: 20px; font-family:Y너만을비춤체;">사외공사 접수</h2>
              <div class="form-floating mb-1">
                <label class='lb' for="agency" style="font-size:15px; width:30%;">접수기관</label>
                <div style="text-align: left;">
                  <input value="{{ form.initial.agency }}" readonly class="form-control" id="agency" name="agency" type="text" placeholder="접수기관" style="width:60%;" required />
                </div>
                <div class="invalid-feedback" id="agencyError">접수기관을 입력해주세요.</div>
              </div>
              <div class="form-floating mb-1">
                <label class='lb' for="author" style="font-size:15px; width:30%;">담당자</label>
                <div style="text-align: left;">
                  <input value="{{ form.initial.author }}" readonly class="form-control" id="author" name="author" type="text" placeholder="담당자" style="width:30%;" required />
                </div>
                <div class="invalid-feedback" id="authorError">담당자를 입력해주세요.</div>
              </div>
              <div class="form-floating mb-1">
                <label class='lb' for="phone" style="font-size:15px; width:30%;">연락처</label>
                <div style="text-align: left;">
                  <input value="{{ form.initial.phone }}" readonly class="form-control" id="phone" name="phone" type="tel" placeholder="연락처" style="width:35%;" required />
                </div>
                <div class="invalid-feedback" id="phoneError">연락처를 입력해주세요.</div>
              </div>
              <div class="form-floating mb-1">
                <label class='lb' for="start_at" style="font-size:15px; width:30%;">공사 시작일</label>
                <div style="text-align: left;">
                  <input class="form-control" id="start_at" name="start_at" type="date" placeholder="공사 시작일" required />
                </div>
                <div class="invalid-feedback" id="startAtError">공사 시작일을 입력해주세요.</div>
              </div>
              <div class="form-floating mb-1">
                <label class='lb' for="end_at" style="font-size:15px; width:30%;">공사 종료일</label>
                <div style="text-align: left;">
                  <input class="form-control" id="end_at" name="end_at" type="date" placeholder="공사 종료일" required />
                </div>
                <div class="invalid-feedback" id="endAtError">공사 종료일을 입력해주세요.</div>
              </div>
              <div class="form-floating mb-1">
                <label class='lb' for="construction_type" style="font-size:15px; width:30%;">공사종류</label>
                <div style="text-align: left;">
                  <textarea class="form-control" id="construction_type" name="construction_type" style="height: 2rem;" type="text" placeholder="공사종류" required></textarea>
                </div>
                <div class="invalid-feedback" id="constructionTypeError">공사종류를 입력해주세요.</div>
              </div>
              <div class="form-floating mb-1">
                <label class='lb' for="content" style="font-size:15px; width:30%;">기타사항</label>
                <div style="text-align: left;">
                  <textarea class="form-control" id="content" name="content" style="height: 5rem;" type="text" placeholder="내용"></textarea>
                </div>
                <div class="invalid-feedback" id="contentError">기타사항을 입력해주세요.</div>
              </div>
              <!-- Submit success message-->
              <!-- This is what your users will see when the form has successfully submitted-->
              <div class="d-grid">
                <button id="button" type="submit" style="background-color: #EC1B23; margin: 0 auto; display: block; border: 2px solid #EC1B23; height: 45px; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.25); line-height: 0px; font-size: 23px; font-weight: 500; letter-spacing: 1.5px; text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.6); borded-radius=10px; background-color: #ff0000;
                color: #fff; padding: 5px 30px; border: none; border-radius: 5px; font-size: 23px; cursor: pointer;">
                  제출
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script>
    document.getElementById("contactForm").addEventListener("submit", function (event) {
      event.preventDefault();
        var contentField = document.getElementById("content");
        if (contentField.value.trim() === "") {
            contentField.value = "없음";
        }
      if (validateForm()) {
        if (confirm("정말 제출하시겠습니까?")) {
          document.getElementById("contactForm").submit();
        }
      }
    });
  
    function validateForm() {
      resetValidationMessages();
  
      var agency = document.getElementById("agency");
      var author = document.getElementById("author");
      var phone = document.getElementById("phone");
      var startAt = document.getElementById("start_at");
      var endAt = document.getElementById("end_at");
      var constructionType = document.getElementById("construction_type");
  
      var isValid = true;
  
      if (agency.value.trim() === "") {
        isValid = false;
        agency.classList.add("is-invalid");
        document.getElementById("agencyError").style.display = "block";
      }
  
      if (author.value.trim() === "") {
        isValid = false;
        author.classList.add("is-invalid");
        document.getElementById("authorError").style.display = "block";
      }
  
      if (phone.value.trim() === "") {
        isValid = false;
        phone.classList.add("is-invalid");
        document.getElementById("phoneError").style.display = "block";
      }
  
      if (startAt.value.trim() === "") {
        isValid = false;
        startAt.classList.add("is-invalid");
        document.getElementById("startAtError").style.display = "block";
      }
  
      if (endAt.value.trim() === "") {
        isValid = false;
        endAt.classList.add("is-invalid");
        document.getElementById("endAtError").style.display = "block";
      }
  
      if (constructionType.value.trim() === "") {
        isValid = false;
        constructionType.classList.add("is-invalid");
        document.getElementById("constructionTypeError").style.display = "block";
      }
  
  
      return isValid;
    }
  
    function resetValidationMessages() {
      var invalidFields = document.getElementsByClassName("is-invalid");
      for (var i = 0; i < invalidFields.length; i++) {
        invalidFields[i].classList.remove("is-invalid");
      }
  
      var errorMessages = document.getElementsByClassName("invalid-feedback");
      for (var j = 0; j < errorMessages.length; j++) {
        errorMessages[j].style.display = "none";
      }
    }
  </script>
  
      
    {% comment %} </header> {% endcomment %}
        <style>
            .form-control2 {
              display: inline-block;
              border: 1px solid;
              width: 20%;
              padding: 0.375rem 0.75rem;
              font-size: 1rem;
              font-weight: 400;
              /* line-height: 1.5; */
              color: #212529;
              background-color: #fff;
              background-clip: padding-box;
              border: 0.125rem 0.125rem solid #000000;
              -webkit-appearance: none;
                 -moz-appearance: none;
                      appearance: none;
              border-radius: 0.5rem;
              transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            }
            .container {
               position: relative;
              }
              
              .header {
               display: flex;
               justify-content: space-between;
               align-items: center;
               padding: 10px;
               background-color: #f1f1f1;
               margin-bottom: 10px;
              }
              
              .logo-section {
               display: flex;
               align-items: center;
              }
              
              .kt-logo {
               height: 40px;
               margin-right: 10px;
              }
              
              .aici-text {
               font-size: 14px;
               font-weight: bold;
              }
            
              .logout-section {
               margin-left: auto;
              }
              
              .logout-text {
               font-size: 14px;
              }
              .container2 {
              --bs-gutter-x: 1.5rem;
              --bs-gutter-y: 0;
              width: 100%;
              padding-right: calc(var(--bs-gutter-x) * 0.5);
              padding-left: calc(var(--bs-gutter-x) * 0.5);
              margin-right: auto;
              margin-left: auto;
              border-bottom: solid;
              border-width: 5px;
              border-color: gray;  
               margin-top: 0px;
               display: flex;
               flex-direction: column;
               align-items: center;
               justify-content: center;
               text-align: center;
               padding: 20px;
              }
              
              .row-container {
               display: flex;
               flex-direction: row;
               justify-content: center;
                border-style: solid;
                border-color: gray;
                border-width: 10px;
                padding: 100px;
              }
              
              .column-container {
               display: flex;
               flex-direction: column;
               align-items: center;
               margin-right: 30px;
              }
              
              .icon-container {
               margin-bottom: 10px;
              }
              
              .icon {
               font-size: 50px;
               color: #007bff;
              }
              
              .text-container {
               text-align: center;
               margin-bottom: 10px;
              }
              
              .button-container {
               margin-bottom: 20px;
              }
              
              .button {
               background-color: #ff0000;
               color: #fff;
               padding: 5px 48px;
               border: none;
               border-radius: 5px;
               font-size: 23px;
               cursor: pointer;
              }
              
              .button:hover {
               background-color: #0056b3;
              }
            </style>

                    <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="{% static "scripts.js"%}"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>

</html>

